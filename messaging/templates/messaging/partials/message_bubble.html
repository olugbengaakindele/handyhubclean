{# messaging/templates/messaging/partials/message_bubble.html #}

<div class="flex {% if m.sender == me %}justify-end{% else %}justify-start{% endif %}">
  <div
    class="max-w-[80%] rounded-2xl px-4 py-3 shadow-sm border
      {% if m.sender == me %}
        bg-emerald-600 text-white border-emerald-600
      {% else %}
        bg-white text-slate-800 border-slate-200
      {% endif %}
    "
  >

    {# TEXT (only show if not empty) #}
    {% if m.content %}
      <p class="text-sm whitespace-pre-line break-words">
        {{ m.content }}
      </p>
    {% endif %}

    {# IMAGE (only show if it exists) #}
    {% if m.has_attachment %}
      <div class="mt-2">
        <img
          src="{{ m.attachment.image.url }}"
          alt="Attachment"
          class="rounded-xl border border-white/20 max-h-64 object-cover"
        />
      </div>
    {% endif %}

    {# TIMESTAMP #}
    <div class="mt-2 text-[11px] leading-none
      {% if m.sender == me %}
        text-emerald-100
      {% else %}
        text-slate-400
      {% endif %}
    ">
      {{ m.created_at|date:"M j, Y Â· g:i A" }}
    </div>

  </div>
</div>
